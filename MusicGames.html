<!DOCTYPE html>
<html>

<head>
	<style type="text/css">
		body {
			margin: 0px;
		}

		#startButton {
			color: #0000FF;
		}

		#gameChoices {
			display: table;
			width: 80%;
			margin-left: 10%;
		}

		.choicesRow {
			border: 1px #000000 solid;
			display: table-row;
		}

		.gameChoice {
			border: 2px #FF0000 dashed;
			display: table-cell;
			width: 32%;
			text-align: center;
		}

	</style>
</head>

<body>
	<div id="pageContainer">
		<div id="welcomeContainer">
			<h1>Hi</h1>
			<button id="startButton">Get started!</button>
		</div>

		<div id="gameContainer">
			<button id="playSong">Play!</button>

			<div id="gameChoices">
				<div class="choicesRow">
					<div class="gameChoice" id="choice1"></div>
					<div class="gameChoice" id="choice2"></div>
					<div class="gameChoice" id="choice3"></div>
				</div>

				<div class="choicesRow">
					<div class="gameChoice" id="choice4"></div>
					<div class="gameChoice" id="choice5"></div>
					<div class="gameChoice" id="choice6"></div>
				</div>

				<div class="choicesRow">
					<div class="gameChoice" id="choice7"></div>
					<div class="gameChoice" id="choice8"></div>
					<div class="gameChoice" id="choice9"></div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">

		// Data -------------------
		/*
		var chartFrom1981 = [
			{"rank": 1, "artist": "Kim Carnes", "title": "Bette Davis Eyes"},
			{"rank": 2, "artist": "Diana Ross & Lionel Richie", "title": "Endless Love"},
			{"rank": 3, "artist": "Kenny Rogers", "title": "Lady"},
			{"rank": 4, "artist": "John Lennon", "title": "(Just Like) Starting Over"},
			{"rank": 5, "artist": "Rick Springfield", "title": "Jessie's Girl"},
			{"rank": 6, "artist": "Kool & the Gang", "title": "Celebration"},
			{"rank": 7, "artist": "Hall & Oates", "title": "Kiss on My List"},
			{"rank": 8, "artist": "Eddie Rabbitt", "title": "I Love a Rainy Night"},
			{"rank": 9, "artist": "Dolly Parton", "title": "9 to 5"},
			{"rank": 10, "artist": "REO Speedwagon", "title": "Keep on Loving You"},
			{"rank": 11, "artist": "Joey Scarbury", "title": "Theme from The Greatest American Hero (Believe It or Not)"},
			{"rank": 12, "artist": "Sheena Easton", "title": "Morning Train (Nine to Five)"},
			{"rank": 13, "artist": "Smokey Robinson", "title": "Being with You"},
			{"rank": 14, "artist": "Juice Newton", "title": "Queen of Hearts"},
			{"rank": 15, "artist": "Blondie", "title": "Rapture"},
			{"rank": 16, "artist": "Raydio", "title": "A Woman Needs Love (Just Like You Do)"},
			{"rank": 17, "artist": "Blondie", "title": "The Tide Is High"},
			{"rank": 18, "artist": "Grover Washington, Jr. & Bill Withers", "title": "Just the Two of Us"},
			{"rank": 19, "artist": "The Pointer Sisters", "title": "Slow Hand"},
			{"rank": 20, "artist": "Climax Blues Band", "title": "I Love You"},
			{"rank": 21, "artist": "John Lennon", "title": "Woman"},
			{"rank": 22, "artist": "A Taste of Honey", "title": "Sukiyaki"},
			{"rank": 23, "artist": "ABBA", "title": "The Winner Takes It All"},
			{"rank": 24, "artist": "Stars on 45", "title": "Stars on 45 Medley"},
			{"rank": 25, "artist": "Juice Newton", "title": "Angel of the Morning"},
			{"rank": 26, "artist": "Neil Diamond", "title": "Love on the Rocks"},
			{"rank": 27, "artist": "Air Supply", "title": "Every Woman in the World"},
			{"rank": 28, "artist": "Air Supply", "title": "The One That You Love"},
			{"rank": 29, "artist": "Barbra Streisand & Barry Gibb", "title": "Guilty"},
			{"rank": 30, "artist": "Styx", "title": "The Best of Times"},
			{"rank": 31, "artist": "The Oak Ridge Boys", "title": "Elvira"},
			{"rank": 32, "artist": "REO Speedwagon", "title": "Take It on the Run"},
			{"rank": 33, "artist": "Ronnie Milsap", "title": "(There's) No Gettin' Over Me"},
			{"rank": 34, "artist": "Gino Vannelli", "title": "Living Inside Myself"},
			{"rank": 35, "artist": "Barbra Streisand", "title": "Woman in Love"},
			{"rank": 36, "artist": "The Manhattan Transfer", "title": "The Boy from New York City"},
			{"rank": 37, "artist": "Foreigner", "title": "Urgent"},
			{"rank": 38, "artist": "Rod Stewart", "title": "Passion"},
			{"rank": 39, "artist": "Commodores", "title": "Lady (You Bring Me Up)"},
			{"rank": 40, "artist": "Don McLean", "title": "Crying"},
			{"rank": 41, "artist": "Marty Balin", "title": "Hearts"},
			{"rank": 42, "artist": "Diana Ross", "title": "It's My Turn"},
			{"rank": 43, "artist": "Hall & Oates", "title": "You Make My Dreams"},
			{"rank": 44, "artist": "Kenny Rogers", "title": "I Don't Need You"},
			{"rank": 45, "artist": "Champaign", "title": "How 'Bout Us"},
			{"rank": 46, "artist": "Pat Benatar", "title": "Hit Me with Your Best Shot"},
			{"rank": 47, "artist": "The Greg Kihn Band", "title": "The Breakup Song (They Don't Write 'Em)"},
			{"rank": 48, "artist": "The Alan Parsons Project", "title": "Time"},
			{"rank": 49, "artist": "Bruce Springsteen", "title": "Hungry Heart"},
			{"rank": 50, "artist": "Franke and the Knockouts", "title": "Sweetheart"},
			{"rank": 51, "artist": "Terri Gibbs", "title": "Somebody's Knockin'"},
			{"rank": 52, "artist": "Leo Sayer", "title": "More Than I Can Say"},
			{"rank": 53, "artist": "Tierra", "title": "Together"},
			{"rank": 54, "artist": "Styx", "title": "Too Much Time on My Hands"},
			{"rank": 55, "artist": "Dottie West & Kenny Rogers", "title": "What Are We Doin' in Love"},
			{"rank": 56, "artist": "Journey", "title": "Who's Crying Now"},
			{"rank": 57, "artist": "The Police", "title": "De Do Do Do, De Da Da Da"},
			{"rank": 58, "artist": "Gary U.S. Bonds", "title": "This Little Girl"},
			{"rank": 59, "artist": "Stevie Nicks & Tom Petty", "title": "Stop Draggin' My Heart Around"},
			{"rank": 60, "artist": "Delbert McClinton", "title": "Giving It Up for Your Love"},
			{"rank": 61, "artist": "Cliff Richard", "title": "A Little in Love"},
			{"rank": 62, "artist": "Neil Diamond", "title": "America"},
			{"rank": 63, "artist": "John Cougar", "title": "Ain't Even Done With The Night"},
			{"rank": 64, "artist": "Christopher Cross", "title": "Arthur's Theme (Best That You Can Do)"},
			{"rank": 65, "artist": "Queen", "title": "Another One Bites the Dust"},
			{"rank": 66, "artist": "The Alan Parsons Project", "title": "Games People Play"},
			{"rank": 67, "artist": "Eric Clapton", "title": "I Can't Stand It"},
			{"rank": 68, "artist": "Steve Winwood", "title": "While You See a Chance"},
			{"rank": 69, "artist": "Stevie Wonder", "title": "Master Blaster (Jammin')"},
			{"rank": 70, "artist": "Neil Diamond", "title": "Hello Again"},
			{"rank": 71, "artist": "The Police", "title": "Don't Stand So Close to Me"},
			{"rank": 72, "artist": "Steely Dan", "title": "Hey Nineteen"},
			{"rank": 73, "artist": "Stevie Wonder", "title": "I Ain't Gonna Stand for It"},
			{"rank": 74, "artist": "George Harrison", "title": "All Those Years Ago"},
			{"rank": 75, "artist": "Eddie Rabbitt", "title": "Step By Step"},
			{"rank": 76, "artist": "Billy Squier", "title": "The Stroke"},
			{"rank": 77, "artist": "Alabama", "title": "Feels So Right"},
			{"rank": 78, "artist": "George Duke & Stanley Clarke", "title": "Sweet Baby"},
			{"rank": 79, "artist": "Dan Fogelberg", "title": "Same Old Lang Syne"},
			{"rank": 80, "artist": "Pablo Cruise", "title": "Cool Love"},
			{"rank": 81, "artist": "Electric Light Orchestra", "title": "Hold on Tight"},
			{"rank": 82, "artist": "John Schneider", "title": "It's Now or Never"},
			{"rank": 83, "artist": "Pat Benatar", "title": "Treat Me Right"},
			{"rank": 84, "artist": "Santana", "title": "Winning"},
			{"rank": 85, "artist": "Barbra Streisand & Barry Gibb", "title": "What Kind of Fool"},
			{"rank": 86, "artist": "John Lennon", "title": "Watching the Wheels"},
			{"rank": 87, "artist": "Heart", "title": "Tell It Like It Is"},
			{"rank": 88, "artist": "Ronnie Milsap", "title": "Smoky Mountain Rain"},
			{"rank": 89, "artist": "Barry Manilow", "title": "I Made It Through the Rain"},
			{"rank": 90, "artist": "Hall & Oates", "title": "You've Lost That Lovin' Feelin'"},
			{"rank": 91, "artist": "Olivia Newton-John & Cliff Richard", "title": "Suddenly"},
			{"rank": 92, "artist": "Sheena Easton", "title": "For Your Eyes Only"},
			{"rank": 93, "artist": "The Beach Boys", "title": "The Beach Boys Medley"},
			{"rank": 94, "artist": "Devo", "title": "Whip It"},
			{"rank": 95, "artist": "Sheena Easton", "title": "Modern Girl"},
			{"rank": 96, "artist": "Gary Wright", "title": "Really Wanna Know You"},
			{"rank": 97, "artist": "Rosanne Cash", "title": "Seven Year Ache"},
			{"rank": 98, "artist": "Diana Ross", "title": "I'm Coming Out"},
			{"rank": 99, "artist": "Boz Scaggs", "title": "Miss Sun"},
			{"rank": 100, "artist": "Andy Gibb", "title": "Time Is Time"}
		];*/

		var song_ids = ['5Yj0cfzPPokzpjUa516jsb', '0bV4WoGRzmYV6y7OojZvqr', '66jBbrVByFETJZ6FfpwxX4', '4nuPrKithHbRJXuA9spwu4', '0D7L4pBEGv8ni1cRfaTdMJ', '6roaUdrIQUlTcujSFLtYKI', '7bdDULyOUqNyWu6XPeAnSO', '5vVuiXoHyRGxJeCaHUpgae', '5LyzPhFwF7MgUY3aQD9TAG', '2dcpVsjiNG2eCE1A0jHzzQ', '5Yq58BC5k14EVUJ63cmg8g', '5VU6nvX3BqkqBmOJ2d9vhW', '4Wr14AISsCuBGdkA6rids4', '0BX0eq3SXW4jeZmQ271CpE', '4MvypG63QYhgFml4PbkycS', '1AhDOtG9vPSOmsWgNW0BEY', '2lBilUJAUX9jCNbbpPRQDD', '0vE1E6ZNJGlCHPe95z5Orl', '1VkjgkPh2joHQFXPxALE4w', '714hERk9U1W8FMYkoC83CO', '3FMaoRyUZ07NQIMlCDAEOi', '7ryYUwyBWKnXY4Ebs7F9Ju', '7paiew5fG14JcbGCCpJ0P5', '69rMjPtfWbelVGHM0TZaAr', '7mSUMlp8ttG8H00RePyZ5J', '4hDDfS0yW4YH0VGsJEjSM8', '4j3nXukQfT5RZTdqgZiKt1', '5VAKsbOWGdBbg1VFlu9W8o', '4bEtg70srLrCqQp3Nm2T5R', '3qVQ4akZVrjKXGE4czz8mI', '7cNq0FTl3GYjLc3g232hdA', '7c52LVpkxq3dzMEkDWiQyw', '0MGO9t2qWvKClhjVtzE8tA', '74DrA5fFoGSy4xgkZarZtP', '6qQrGkO4grQ7wKCxhtX1io', '55pdXiMNJNQxehrjkcwmYL', '65ANSaYbBQK6z8fOl0TWVd', '5phyXUNMfJv76epjasKNDS', '7m3dKsll00vBjZqYgZuP62', '69eoS6bEWWfMac4TL36UiM', '2lYe3AhO4dJhBMsvk9uBkw', '3I7bYwN9cMsXm5HqEH76Vv', '4IYoyOVK9oQyJS1QZt5Vyj', '0KMGxYKeUzK9wc5DZCt3HT', '20MxJN12WEqU5eWsuCrwM5', '65uzzraBcb1BE3BiYEztd7', '07KHJvlYBeQVqrmifTEqEp', '7IoKA8yRibsK8Ryy4SH2NL', '2kOOxUIHZvz4TsYE6kHYjb', '3AdX0KdVoMBqe82b19rWAU', '7tV4IBfyJN1E9rC9lxkl2Z', '6BJTagJUFeUxHpVWxTmatw', '58tKMD5v0R4H6ZtgHNyGbO', '5lSvRiMiLnG5HIpcQH4MAz', '3Hp66WUQ6yu69jMrirhSRs', '6J9paEX8rcBYuAIawdnzUj', '3VXoFBJ67ceuFqFdXd6vld', '0qbVccbQLEMbfJcI5wNLTJ', '0FF6HAfbuaVpZC8td4WcmN', '5eze4FmXWb2LvtuMRGcOXq', '2skIFujR9zTTAEXj8tfrw0', '05zCw24BdvZKGeC5NXowVe', '4UN5z3IkTamNxngTsS3Qrm', '763jJ8T1utfvNqz1WRDzx4', '2JOQYyJH6lG8hxpzmInRX0', '5TWPfkeN07aERO0Yn2D2t2', '77PCWchIQ9Dopdp5sahDEc', '67J6NR2Tdl0h2epWHcCBBN', '5dFoWIiJ2814hRwMYDcFiU', '32UDt5O32Ju7gTQWI3Pb7c', '5YtxOL4iUchhynLL9nEBwQ', '4MYb7NWLwXNDB7bYs3HeX8', '29VPObDt1Sg0YBwv8x8aHE', '4QEbXYWpDDWHzXNINdZlzW', '7odZlvyjhlFESLeu2PSZ5z', '2CsghsYEVWEgACHtecmCCj', '3MFa9idQuY4iJLWsZl3tIQ', '7utoClKnLShFg6u6dZ20gp', '3OALvGFqkjzwylB345KOVt', '3KGM2fm1K3p5alOyHGzTyY', '5XEsQ97NshBJ02yXpFSkTa', '1dCZvxf24rGMQNOamU9yy2', '3WOmG6u7bxrcFXwfiKMk80', '093Yob0qYlv7p4KdOXbkB4', '6fobsZ84ye4LF4m9IhsJH4', '4xsjEa8mfniPVJ58lKFP8e', '0WeJT7rCshvzK5BOBiAjBn'];


		// Classes -------------------
		/*
		Song = function(artist, trackName) {
			this.artist = artist;
			this.trackName = trackName;

			this.year = null;
			this.yearRank = null;

			this.spotifyData = null;

			this.setSpotifyData = function() {
				// attempts to set this.spotifyData to a spotify track object by
				// searching spotify for the track name and checking the results
				// for a case-insensitive exact track name match (prefers an
				// exact artist match)

				if (this.spotifyData != null) {
					return;
				}

				// request spotify search results
				var searchUrl = getSpotifySearchUrl(this.artist, this.trackName, 'track');
				var searchResults = getSpotifySearchResults(searchUrl);// + "&limit=5");
				//console.log(searchResults);

				// match artist/track to results
				var tracks = searchResults.tracks.items;
				var matchedSong = getSongMatchFromResults(this.artist, this.trackName, tracks);

				// set this.spotifyData to track result
				if (matchedSong != null) {
					//console.log('Successfully matched:', this.artist, this.trackName);
					this.spotifyData = matchedSong;
				}

				//else {
					//console.log("Couldn't get spotify data for:", this.artist, this.trackName);
				//}
			};
		};
		*/

		// Functions -------------------

		function replaceSpaces(string) {
			// returns the supplied string with all spaces replaced by %20
			// so it can be used in the spotify search call

			if (string.indexOf(' ') > -1) {
				return replaceSpaces(string.replace(' ', '%20'));
			}

			else {
				return string;
			}
		}

		function getSpotifySearchUrl(artist, trackName, searchType) {
			// creates an appropriate url to call the search api.
			//
			// a quick test showed searching for both artist and track
			// made it harder to match the specific song so this makes
			// a track name search

			var baseSearchUrl = "https://api.spotify.com/v1/search?q=";

			var searchableArtist = replaceSpaces(artist);
			var searchableTrack = replaceSpaces(trackName);

			var artistQuery = "artist:" + searchableArtist;
			var trackQuery = "track:" + searchableTrack;
			var typeQuery = "type=" + searchType;

			//var constructed_query = artistQuery + "&" + trackQuery + "&" + typeQuery;
			var constructed_query = trackQuery + "&" + typeQuery;
			var searchUrl = baseSearchUrl + constructed_query;

			return searchUrl;
		}

		function getSpotifySearchResults(constructedUrl) {
			// call the spotify search api with the supplied url
			// returns a JSON formatted object of the search results

			var searchRequest = new XMLHttpRequest();

			searchRequest.open("GET", constructedUrl, false);
			searchRequest.send(null);

			return JSON.parse(searchRequest.responseText);
		}

		function getSongMatchFromResults(artist, trackName, spotifyTracks) {
			// compares an artist and track to an array of spotify tracks taken
			// from the spotify search results, returns an exact track and artist
			// match immediately, otherwise returns a track match, or null

			var bestTrackResult = null;

			for (var i = 0; i < spotifyTracks.length; i++) {
				var trackNameResult = spotifyTracks[i].name;
				var artistsResult = spotifyTracks[i].artists;

				if (trackName.toLowerCase() == trackNameResult.toLowerCase()) {
					if (bestTrackResult === null) {
						bestTrackResult = spotifyTracks[i];
					}

					for (var j = 0; j < artistsResult.length; j++) {
						var artistName = artistsResult[j].name;

						if (artist.toLowerCase() == artistName.toLowerCase()) {
							return spotifyTracks[i];
						}
					}
				}
			}

			//console.log('Returning best result for:', artist, trackName, bestTrackResult);
			return bestTrackResult;
		}

		function createImageFromUrl(imageUrl) {
			var img = new Image();
			img.src = imageUrl;

			return img;
		}

		// UI Handling

		UserInterface = function() {
			/*
			this.initialize = function() {
				var gameContainer = document.getElementById("gameContainer");
				gameContainer.width = window.innerWidth;
				gameContainer.hidden = true;
			};

			this.removeWelcome = function() {
				var welcomeContainer = document.getElementById("welcomeContainer");
				welcomeContainer.remove();
			};

			this.showGame = function() {
				var gameContainer = document.getElementById("gameContainer");
				gameContainer.hidden = false;
			};

			this.addChoicesArt = function(songChoices, choiceElements) {
				// bug: doesn't make sure the image has loaded before
				// displaying so you can end up with broken images

				if (songChoices.length != choiceElements.length) {
					alert("Song choice count doesn't match choice container count");
					return;
				}

				var containerSize = choiceElements[0].clientWidth;

				for (var i = 0; i < songChoices.length; i++) {
					var choiceContainer = choiceElements[i];
					var albumImages = songChoices[i].spotifyData.album.images;

					var largeArt = albumImages[0].url;
					var mediumArt = albumImages[1].url;
					var smallArt = albumImages[2].url;

					if (containerSize > 320) {
						var albumArt = createImageFromUrl(mediumArt);
						albumArt.className = "albumArt";
					}

					else {
						var albumArt = createImageFromUrl(smallArt);
						albumArt.className = "albumArt";
					}

					choiceContainer.appendChild(albumArt);

					this.addSongInformationToChoice(songChoices[i], choiceContainer);
				}
			};

			this.addSongInformationToChoice = function(song, choiceElement) {
				//console.log(song.spotifyData)
				var songTitleElement = document.createElement("p");
				var songArtistElement = document.createElement("p");

				songTitleElement.className = "songTitles";
				songArtistElement.className = "songArtists";

				songTitleElement.textContent = song.spotifyData.name;

				if (song.spotifyData.artists.length == 1) {
					var artistString = song.spotifyData.artists[0].name;
				}

				else if (song.spotifyData.artists.length == 2) {
					var artistString = song.spotifyData.artists[0].name +
										" with " +
										song.spotifyData.artists[1].name;
				}

				else {
					var artistCount = song.spotifyData.artists.length;
					var mainArtist = song.spotifyData.artists[0].name;

					var othersCount = (artistCount - 1).toString();

					var artistString = mainArtist + " with " + othersCount + " others";
				}

				songArtistElement.textContent = artistString;

				choiceElement.appendChild(songTitleElement);
				choiceElement.appendChild(songArtistElement);
			};
			*/
		};

		// Game Handling

		GameData = function() {
			/*
			this.songs = null;

			this.roundNumber = 0;
			this.songChoiceCount = 9;

			this.songChoices = null;
			this.audioPreview = null;
			*/
		};

		Game = function() {
			/*
			this.data = new GameData();

			this.initialize = function() {
				this.setSongList(chartFrom1981);
				this.data.songChoices = this.selectRandomSongs(this.data.songChoiceCount);

				this.ui = new UserInterface();
				this.ui.initialize();

				var startButton = document.getElementById("startButton");
				var playButton = document.getElementById("playSong");

				this.addEventListeners(startButton, "click");
				this.addEventListeners(playButton, "click");
			};

			this.setSongList = function(songData) {
				var songs = [];

				for (var i = 0; i < songData.length; i++) {
					songs.push(new Song(songData[i].artist, songData[i].title));

					songs[songs.length - 1].year = 1981;
					songs[songs.length - 1].yearRank = songData[i].rank;

					if (songData.length < 10) {
						songs[songs.length - 1].setSpotifyData();
					}
				}

				this.data.songs = songs;
			};

			this.addEventListeners = function(element, listenerType) {
				element.addEventListener(listenerType, this, false);
			};

			this.handleEvent = function(e) {
				var eventType = e.type;
				var eventElement = e.srcElement;

				console.log(eventElement);

				if (eventElement.id == 'startButton') {
					this.beginGame();
				}

				else if (eventElement.id == 'playSong') {
					this.playSongPreview();
				}

				else if (eventElement.className == 'albumArt') {
					console.log(this.checkForSongMatch(e.toElement));
					//console.log('clicked game choice', e.toElement.parentElement);
				}
			};

			this.beginGame = function() {
				this.ui.removeWelcome();
				this.ui.showGame();

				var correctSongIndex = Math.floor(Math.random() * this.data.songChoiceCount);
				console.log(this.data.songChoices[correctSongIndex]);

				this.data.audioPreview = new Audio();
				this.data.audioPreview.src = this.data.songChoices[correctSongIndex].spotifyData.preview_url;

				var choiceContainers = document.getElementsByClassName("gameChoice");

				this.ui.addChoicesArt(this.data.songChoices, choiceContainers);

				for (var i = 0; i < choiceContainers.length; i++) {
					var choiceArt = choiceContainers[i].childNodes[0];

					if (choiceArt.className == "albumArt") {
						this.addEventListeners(choiceArt, "click");
					}

					else {
						console.log("Couldn't add art event listener...");
					}
				}
			};

			this.playSongPreview = function() {
				if (this.data.audioPreview.paused) {
					this.data.audioPreview.play();
				}
				else {
					this.data.audioPreview.pause();
				}
			};

			this.selectRandomSongs = function(songCount) {
				// attempts to remove n songs from this.data.songs and returns
				// them as a new array with song.spotifyData info added
				// returns null if there aren't enough available songs to choose from
				// n = songCount
				// ** fix this to not alter this.data.songs **

				var randomSongs = [];

				for (var i = 0; i < songCount; i++) {
					var songsNeeded = songCount - i;

					if (songsNeeded > this.data.songs.length) {
						for (var j = 0; j < randomSongs.length; j++) {
							this.data.songs.push(randomSongs[j]);
						}

						alert("Couldn't find enough songs to play");
						return null;
					}

					var randIndex = Math.floor(Math.random() * this.data.songs.length);
					var randomSong = this.data.songs.splice(randIndex, 1)[0];

					if (randomSong.spotifyData === null) {
						randomSong.setSpotifyData();

						if (randomSong.spotifyData != null) {
							randomSongs.push(randomSong);
						}

						else {
							songCount++;
						}
					}

					else {
						randomSongs.push(randomSong);
					}
				}

				return randomSongs;
			};

			this.checkForSongMatch = function(clickedElement) {
				// clickedElement should be the album art image element
				// this checks for a match by determining the correct song from
				// the preview url, then compares the available album art urls
				// to the clicked art url. this makes it a little harder to cheat
				// than having the correct song stored in this.data

				var correctSong = null;

				for (var i = 0; i < this.data.songChoices.length; i++) {
					var previewUrl = this.data.songChoices[i].spotifyData.preview_url;

					if (previewUrl == this.data.audioPreview.src) {
						correctSong = this.data.songChoices[i];

						break;
					}
				}

				if (correctSong != null) {
					var correctSongArt = correctSong.spotifyData.album.images;

					for (var i = 0; i < correctSongArt.length; i++) {
						if (correctSongArt[i].url == clickedElement.src) {
							return true;
						}
					}

					return false;
				}

				console.log("Couldn't determine song match");
				return null;
			};
			*/
		};

		// Testing -------------------

		var game = new Game();
		//game.initialize();
		//game.beginGame();


	</script>
</body>

</html>
